{% extends "users/base.html" %}
{% block title %}Users{% endblock %}
{% block content %}
<h2>All Users</h2>
<ul class="list-group">
    {% for user in users %}
        <li class="list-group-item">
            <strong>{{ user.first_name }} {{ user.last_name }} ({{ user.email }})</strong>
            <ul>
                {% for team in user.teams.all %}
                    <li>
                        Team: {{ team.name }}
                        {% if user in team.admins.all %}<small class="text-success ms-2">Admin</small>{% endif %}
                        <ul>
                            <li>
                                Club: {{ team.club.name }}
                                {% if user in team.club.admins.all %}<small class="text-success ms-2">Admin</small>{% endif %}
                            </li>
                            <li>
                                Association: {{ team.association.name }}
                                {% if user in team.association.admins.all %}<small class="text-success ms-2">Admin</small>{% endif %}
                            </li>
                        </ul>
                    </li>
                {% empty %}
                    <li><em>No teams</em></li>
                {% endfor %}
            </ul>
        </li>
    {% endfor %}
</ul>
{% endblock %}